{"remainingRequest":"D:\\GitHub\\vueview\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GitHub\\vueview\\src\\views\\member\\MemberList.vue?vue&type=style&index=0&id=2427dbe3&scoped=true&lang=css&","dependencies":[{"path":"D:\\GitHub\\vueview\\src\\views\\member\\MemberList.vue","mtime":1563431148049},{"path":"D:\\GitHub\\vueview\\node_modules\\css-loader\\index.js","mtime":1561020347108},{"path":"D:\\GitHub\\vueview\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1561020351693},{"path":"D:\\GitHub\\vueview\\node_modules\\postcss-loader\\src\\index.js","mtime":1561020350115},{"path":"D:\\GitHub\\vueview\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1561020346158},{"path":"D:\\GitHub\\vueview\\node_modules\\vue-loader\\lib\\index.js","mtime":1561020351693}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.avatar-uploader .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n}\n\n.avatar-uploader .el-upload:hover {\n    border-color: #409EFF;\n}\n\n.avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 178px;\n    height: 178px;\n    line-height: 178px;\n    text-align: center;\n}\n\n.avatar {\n    width: 100px;\n    height: 100px;\n    display: block;\n}\n",{"version":3,"sources":["MemberList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuUA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"MemberList.vue","sourceRoot":"src/views/member","sourcesContent":["<template>\r\n\r\n    <div>\r\n\r\n        <div style=\"padding: 10px 20px\">\r\n            <el-input style=\"width: 300px\"\r\n                      placeholder=\"请输入昵称或手机号查询\"\r\n                      v-model=\"keyWord\">\r\n            </el-input>\r\n            <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"memberSearch\">查询</el-button>\r\n            <el-button type=\"primary\" icon=\"el-icon-delete\" round style=\"float: right\" @click=\"memberDelete\">删除\r\n            </el-button>\r\n            <el-button type=\"primary\" icon=\"el-icon-edit\" round style=\"float: right\" @click=\"memberEdit\">编辑</el-button>\r\n            <el-button type=\"primary\" icon=\"el-icon-success\" round style=\"float: right\" @click=\"memberAdd\">新增\r\n            </el-button>\r\n            <el-button type=\"primary\" icon=\"el-icon-download\" round style=\"float: right\" @click=\"exportMember\">导出\r\n            </el-button>\r\n        </div>\r\n\r\n        <el-table :data=\"memberListData\"\r\n                  ref=\"multipleTable\"\r\n                  :row-class-name=\"tableRowClassName\"\r\n                  stripe\r\n                  max-height=\"650\"\r\n                  @row-click=\"rowClick\"\r\n                  @selection-change=\"selectionChange\"\r\n        >\r\n            <el-table-column\r\n                    type=\"selection\"\r\n                    width=\"55\">\r\n            </el-table-column>\r\n\r\n            <el-table-column prop=\"registerPhone\" :formatter=\"phoneFormat\" label=\"手机号\" align=\"center\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"memberUuid\" label=\"会员uuid\" align=\"center\" width=\"200px\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"memberNickname\" label=\"会员昵称\" align=\"center\" show-overflow-tooltip>\r\n            </el-table-column>\r\n            <el-table-column prop=\"gender\" :formatter=\"genderFormat\" label=\"性别\" align=\"center\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"memberImgUrl\" label=\"会员头像\" align=\"center\">\r\n                <template slot-scope=\"scope\">\r\n                    <img :src=\"scope.row.memberImgUrl\" width=\"50\" height=\"50\"/>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"personSignature\" label=\"个人签名\" align=\"center\" show-overflow-tooltip>\r\n            </el-table-column>\r\n            <el-table-column prop=\"birthday\" label=\"出生年月\" align=\"center\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"memberStatus\" :formatter=\"memberStatusFormat\" label=\"账号状态\" align=\"center\">\r\n            </el-table-column>\r\n        </el-table>\r\n        <div class=\"block\" style=\"float: right;padding: 30px\">\r\n            <el-pagination\r\n                    @size-change=\"handleSizeChange\"\r\n                    @current-change=\"handleCurrentChange\"\r\n                    :page-sizes=\"[10, 20, 30, 40]\"\r\n                    :page-size=\"pageSize\"\r\n                    layout=\"total, sizes, prev, pager, next, jumper\"\r\n                    :total=\"total\">\r\n            </el-pagination>\r\n        </div>\r\n\r\n        <!--新增dialog-->\r\n        <el-dialog :title=\"dialogTitle\" :visible.sync=\"memberDialog\" width=\"35%\">\r\n            <el-form :model=\"member\" style=\"text-align: center\">\r\n                <el-form-item label=\"手机号\" label-width=\"100px\" required>\r\n                    <el-input v-model=\"member.registerPhone\" style=\"width: 229px\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"会员昵称\" label-width=\"100px\">\r\n                    <el-input v-model=\"member.memberNickname\" style=\"width: 229px\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"性别\" label-width=\"100px\">\r\n                    <el-select v-model=\"member.gender\" placeholder=\"性别\">\r\n                        <el-option label=\"男\" value=\"0\"></el-option>\r\n                        <el-option label=\"女\" value=\"1\"></el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"个人签名\" label-width=\"100px\">\r\n                    <el-input v-model=\"member.personSignature\" style=\"width: 229px\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"出生年月\" label-width=\"100px\">\r\n                    <el-date-picker type=\"date\" placeholder=\"选择日期\" v-model=\"member.birthday\"\r\n                                    :editable=\"false\"></el-date-picker>\r\n                </el-form-item>\r\n                <el-form-item label=\"会员头像\" label-width=\"100px\">\r\n                    <el-upload\r\n                            class=\"avatar-uploader\"\r\n                            action=\"/ss/upload/uploadFile\"\r\n                            :show-file-list=\"false\"\r\n                            :on-success=\"handleAvatarSuccess\"\r\n                            :before-upload=\"beforeAvatarUpload\">\r\n                        <img v-if=\"temporaryImg\" :src=\"uploadImg\" class=\"avatar\">\r\n                        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n                    </el-upload>\r\n                </el-form-item>\r\n            </el-form>\r\n            <div slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"memberDialog = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"memberSubmit\">确 定</el-button>\r\n            </div>\r\n        </el-dialog>\r\n\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"MemberList\",\r\n        data() {\r\n            return {\r\n                pageNo: 1,\r\n                pageSize: 10,\r\n                total: 0,\r\n                memberListData: [],\r\n                keyWord: null,\r\n                memberDialog: false,\r\n                uploadImg: \"\",\r\n                temporaryImg: \"\",\r\n                indexList: [],\r\n                dialogTitle: \"\",\r\n                member: {\r\n                    registerPhone: null,\r\n                    memberNickname: null,\r\n                    gender: null,\r\n                    memberImgUrl: null,\r\n                    personSignature: null,\r\n                    birthday: null\r\n                }\r\n            }\r\n        },\r\n        mounted() {\r\n            this.http(this.pageNo, this.pageSize, this.keyWord);\r\n        },\r\n        methods: {\r\n            http(pageNo, pageSize, keyWord) {\r\n                this.$http.post(\"/member/findByPage\", {}, {\r\n                    params: {\r\n                        pageNo: pageNo,\r\n                        pageSize: pageSize,\r\n                        keyWord: keyWord\r\n                    }\r\n                })\r\n                    .then(res => {\r\n                        const {list, total} = res.data;\r\n                        this.memberListData = list;\r\n                        this.total = total;\r\n                    })\r\n            },\r\n            //格式化\r\n            genderFormat(row) {\r\n                return row.gender === 0 ? '男' : '女';\r\n            },\r\n            memberStatusFormat(row) {\r\n                return row.memberStatus === 0 ? '正常' : '禁用';\r\n            },\r\n            phoneFormat(row) {\r\n                const reg = /^(\\d{3})\\d{4}(\\d{4})$/;\r\n                return String(row.registerPhone).replace(reg, \"$1****$2\");\r\n            },\r\n            //点击选中\r\n            tableRowClassName({row, rowIndex}) {\r\n                //把每一行的索引放进row\r\n                row.index = rowIndex;\r\n            },\r\n            //选中行\r\n            rowClick(row) {\r\n                const index = row.index;\r\n                this.$refs.multipleTable.toggleRowSelection(this.memberListData[index]);\r\n\r\n            },\r\n            //选中改变\r\n            selectionChange(selection) {\r\n                this.indexList = [];\r\n                selection.forEach(k => {\r\n                    this.indexList.push(k.id)\r\n                })\r\n                if (selection.length > 0) {\r\n                    this.member = selection[selection.length - 1]\r\n                    this.member.gender === 0 ? this.member.gender = \"男\" : this.member.gender = \"女\";\r\n                    this.temporaryImg = this.member.memberImgUrl;\r\n                } else {\r\n                    this.emptyMember();\r\n                }\r\n            },\r\n            //分页条\r\n            handleSizeChange(size) {\r\n                this.http(this.pageNo, size, this.keyWord);\r\n            },\r\n            //页码改变\r\n            handleCurrentChange(currentPage) {\r\n                this.http(currentPage, this.pageSize, this.keyWord);\r\n            },\r\n            //查询按钮\r\n            memberSearch() {\r\n                if (this.keyWord) {\r\n                    this.http(this.pageNo, this.pageSize, this.keyWord);\r\n                } else {\r\n                    this.message(\"请输入查询条件!\", \"warning\");\r\n                }\r\n            },\r\n            //导出按钮\r\n            exportMember() {\r\n                window.location = '/ss/excel/getMemberList'\r\n            },\r\n            //打开新增\r\n            memberAdd() {\r\n                this.emptyMember();\r\n                this.dialogTitle = \"新增会员\";\r\n                this.memberDialog = true;\r\n                this.$refs.multipleTable.clearSelection();\r\n            },\r\n            //表单确认\r\n            memberSubmit() {\r\n                if (this.dialogTitle === \"新增会员\") {\r\n                    this.memberAddSubmit();\r\n                } else {\r\n                    this.memberEditSubmit();\r\n                }\r\n\r\n            },\r\n            //新增提交\r\n            memberAddSubmit() {\r\n                this.member.memberImgUrl = this.temporaryImg;\r\n                this.$http.post(\"/member/add\", this.member\r\n                )\r\n                    .then(res => {\r\n                        this.memberDialog = false;\r\n                        this.message(res.message, \"success\")\r\n                        if (res.code === 200) {\r\n                            this.http(this.pageNo, this.pageSize, this.keyWord);\r\n                        }\r\n\r\n                    })\r\n            },\r\n            //打开编辑\r\n            memberEdit() {\r\n                if (this.member.registerPhone) {\r\n                    this.uploadImg = this.member.memberImgUrl;\r\n                    this.dialogTitle = \"编辑会员\";\r\n                    this.memberDialog = true\r\n                } else {\r\n                    this.message(\"请选中需要编辑的数据!\", \"warning\");\r\n                }\r\n\r\n            },\r\n            //编辑提交\r\n            memberEditSubmit() {\r\n                if (this.temporaryImg) {\r\n                    this.member.memberImgUrl = this.temporaryImg;\r\n                }\r\n                this.$http.put(\"/member/edit\", this.member\r\n                )\r\n                    .then(res => {\r\n                        this.memberDialog = false;\r\n                        this.message(res.message, \"success\")\r\n                        if (res.code === 200) {\r\n                            this.http(this.pageNo, this.pageSize, this.keyWord);\r\n                        }\r\n\r\n                    })\r\n            },\r\n            //删除\r\n            memberDelete() {\r\n                if (this.indexList.length > 0) {\r\n                    this.$confirm(\"您确定要删除选中的数据吗?\",\"提示\",{\r\n                        type:\"warning\"\r\n                    })\r\n                        .then(() => {\r\n                            this.$http.post(\"/member/delete\", this.indexList\r\n                            )\r\n                                .then(res => {\r\n                                    this.memberDialog = false;\r\n                                    this.message(res.message, \"success\")\r\n                                    if (res.code === 200) {\r\n                                        this.http(this.pageNo, this.pageSize, this.keyWord);\r\n                                    }\r\n\r\n                                })\r\n                        })\r\n                        .catch(() => {\r\n                        });\r\n\r\n                } else {\r\n                    this.message(\"请选中需要删除的数据!\", \"warning\");\r\n                }\r\n            },\r\n            //上传图片\r\n            handleAvatarSuccess(res, file) {\r\n                this.uploadImg = URL.createObjectURL(file.raw);\r\n                this.temporaryImg = res;\r\n            },\r\n            //限制上传文件格式\r\n            beforeAvatarUpload(file) {\r\n                const isJPG = file.type === 'image/jpeg';\r\n                const isPNG = file.type === 'image/png';\r\n                const isLt2M = file.size / 1024 / 1024 < 6;\r\n                return (isJPG || isPNG) && isLt2M;\r\n            },\r\n            //清空会员信息\r\n            emptyMember() {\r\n                this.member = {\r\n                    registerPhone: null,\r\n                    memberNickname: null,\r\n                    gender: null,\r\n                    memberImgUrl: null,\r\n                    personSignature: null,\r\n                    birthday: null\r\n                }\r\n                this.temporaryImg = this.member.memberImgUrl;\r\n            },\r\n            //信息提示\r\n            message(message, type) {\r\n                this.$message({\r\n                    message: message,\r\n                    center: true,\r\n                    duration: 1000,\r\n                    type: type\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n</script>\r\n\r\n<style scoped>\r\n    .avatar-uploader .el-upload {\r\n        border: 1px dashed #d9d9d9;\r\n        border-radius: 6px;\r\n        cursor: pointer;\r\n        position: relative;\r\n        overflow: hidden;\r\n    }\r\n\r\n    .avatar-uploader .el-upload:hover {\r\n        border-color: #409EFF;\r\n    }\r\n\r\n    .avatar-uploader-icon {\r\n        font-size: 28px;\r\n        color: #8c939d;\r\n        width: 178px;\r\n        height: 178px;\r\n        line-height: 178px;\r\n        text-align: center;\r\n    }\r\n\r\n    .avatar {\r\n        width: 100px;\r\n        height: 100px;\r\n        display: block;\r\n    }\r\n</style>"]}]}