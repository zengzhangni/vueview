{"remainingRequest":"D:\\GitHub\\vueview\\node_modules\\babel-loader\\lib\\index.js!D:\\GitHub\\vueview\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\GitHub\\vueview\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GitHub\\vueview\\src\\views\\member\\MemberList.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\GitHub\\vueview\\src\\views\\member\\MemberList.vue","mtime":1563431148049},{"path":"D:\\GitHub\\vueview\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1561020346158},{"path":"D:\\GitHub\\vueview\\node_modules\\babel-loader\\lib\\index.js","mtime":1561020343978},{"path":"D:\\GitHub\\vueview\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1561020346158},{"path":"D:\\GitHub\\vueview\\node_modules\\vue-loader\\lib\\index.js","mtime":1561020351693}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.replace\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"MemberList\",\n  data: function data() {\n    return {\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      memberListData: [],\n      keyWord: null,\n      memberDialog: false,\n      uploadImg: \"\",\n      temporaryImg: \"\",\n      indexList: [],\n      dialogTitle: \"\",\n      member: {\n        registerPhone: null,\n        memberNickname: null,\n        gender: null,\n        memberImgUrl: null,\n        personSignature: null,\n        birthday: null\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.http(this.pageNo, this.pageSize, this.keyWord);\n  },\n  methods: {\n    http: function http(pageNo, pageSize, keyWord) {\n      var _this = this;\n\n      this.$http.post(\"/member/findByPage\", {}, {\n        params: {\n          pageNo: pageNo,\n          pageSize: pageSize,\n          keyWord: keyWord\n        }\n      }).then(function (res) {\n        var _res$data = res.data,\n            list = _res$data.list,\n            total = _res$data.total;\n        _this.memberListData = list;\n        _this.total = total;\n      });\n    },\n    //格式化\n    genderFormat: function genderFormat(row) {\n      return row.gender === 0 ? '男' : '女';\n    },\n    memberStatusFormat: function memberStatusFormat(row) {\n      return row.memberStatus === 0 ? '正常' : '禁用';\n    },\n    phoneFormat: function phoneFormat(row) {\n      var reg = /^(\\d{3})\\d{4}(\\d{4})$/;\n      return String(row.registerPhone).replace(reg, \"$1****$2\");\n    },\n    //点击选中\n    tableRowClassName: function tableRowClassName(_ref) {\n      var row = _ref.row,\n          rowIndex = _ref.rowIndex;\n      //把每一行的索引放进row\n      row.index = rowIndex;\n    },\n    //选中行\n    rowClick: function rowClick(row) {\n      var index = row.index;\n      this.$refs.multipleTable.toggleRowSelection(this.memberListData[index]);\n    },\n    //选中改变\n    selectionChange: function selectionChange(selection) {\n      var _this2 = this;\n\n      this.indexList = [];\n      selection.forEach(function (k) {\n        _this2.indexList.push(k.id);\n      });\n\n      if (selection.length > 0) {\n        this.member = selection[selection.length - 1];\n        this.member.gender === 0 ? this.member.gender = \"男\" : this.member.gender = \"女\";\n        this.temporaryImg = this.member.memberImgUrl;\n      } else {\n        this.emptyMember();\n      }\n    },\n    //分页条\n    handleSizeChange: function handleSizeChange(size) {\n      this.http(this.pageNo, size, this.keyWord);\n    },\n    //页码改变\n    handleCurrentChange: function handleCurrentChange(currentPage) {\n      this.http(currentPage, this.pageSize, this.keyWord);\n    },\n    //查询按钮\n    memberSearch: function memberSearch() {\n      if (this.keyWord) {\n        this.http(this.pageNo, this.pageSize, this.keyWord);\n      } else {\n        this.message(\"请输入查询条件!\", \"warning\");\n      }\n    },\n    //导出按钮\n    exportMember: function exportMember() {\n      window.location = '/ss/excel/getMemberList';\n    },\n    //打开新增\n    memberAdd: function memberAdd() {\n      this.emptyMember();\n      this.dialogTitle = \"新增会员\";\n      this.memberDialog = true;\n      this.$refs.multipleTable.clearSelection();\n    },\n    //表单确认\n    memberSubmit: function memberSubmit() {\n      if (this.dialogTitle === \"新增会员\") {\n        this.memberAddSubmit();\n      } else {\n        this.memberEditSubmit();\n      }\n    },\n    //新增提交\n    memberAddSubmit: function memberAddSubmit() {\n      var _this3 = this;\n\n      this.member.memberImgUrl = this.temporaryImg;\n      this.$http.post(\"/member/add\", this.member).then(function (res) {\n        _this3.memberDialog = false;\n\n        _this3.message(res.message, \"success\");\n\n        if (res.code === 200) {\n          _this3.http(_this3.pageNo, _this3.pageSize, _this3.keyWord);\n        }\n      });\n    },\n    //打开编辑\n    memberEdit: function memberEdit() {\n      if (this.member.registerPhone) {\n        this.uploadImg = this.member.memberImgUrl;\n        this.dialogTitle = \"编辑会员\";\n        this.memberDialog = true;\n      } else {\n        this.message(\"请选中需要编辑的数据!\", \"warning\");\n      }\n    },\n    //编辑提交\n    memberEditSubmit: function memberEditSubmit() {\n      var _this4 = this;\n\n      if (this.temporaryImg) {\n        this.member.memberImgUrl = this.temporaryImg;\n      }\n\n      this.$http.put(\"/member/edit\", this.member).then(function (res) {\n        _this4.memberDialog = false;\n\n        _this4.message(res.message, \"success\");\n\n        if (res.code === 200) {\n          _this4.http(_this4.pageNo, _this4.pageSize, _this4.keyWord);\n        }\n      });\n    },\n    //删除\n    memberDelete: function memberDelete() {\n      var _this5 = this;\n\n      if (this.indexList.length > 0) {\n        this.$confirm(\"您确定要删除选中的数据吗?\", \"提示\", {\n          type: \"warning\"\n        }).then(function () {\n          _this5.$http.post(\"/member/delete\", _this5.indexList).then(function (res) {\n            _this5.memberDialog = false;\n\n            _this5.message(res.message, \"success\");\n\n            if (res.code === 200) {\n              _this5.http(_this5.pageNo, _this5.pageSize, _this5.keyWord);\n            }\n          });\n        }).catch(function () {});\n      } else {\n        this.message(\"请选中需要删除的数据!\", \"warning\");\n      }\n    },\n    //上传图片\n    handleAvatarSuccess: function handleAvatarSuccess(res, file) {\n      this.uploadImg = URL.createObjectURL(file.raw);\n      this.temporaryImg = res;\n    },\n    //限制上传文件格式\n    beforeAvatarUpload: function beforeAvatarUpload(file) {\n      var isJPG = file.type === 'image/jpeg';\n      var isPNG = file.type === 'image/png';\n      var isLt2M = file.size / 1024 / 1024 < 6;\n      return (isJPG || isPNG) && isLt2M;\n    },\n    //清空会员信息\n    emptyMember: function emptyMember() {\n      this.member = {\n        registerPhone: null,\n        memberNickname: null,\n        gender: null,\n        memberImgUrl: null,\n        personSignature: null,\n        birthday: null\n      };\n      this.temporaryImg = this.member.memberImgUrl;\n    },\n    //信息提示\n    message: function message(_message, type) {\n      this.$message({\n        message: _message,\n        center: true,\n        duration: 1000,\n        type: type\n      });\n    }\n  }\n};",{"version":3,"sources":["MemberList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\r\n    <div>\r\n\r\n        <div style=\"padding: 10px 20px\">\r\n            <el-input style=\"width: 300px\"\r\n                      placeholder=\"请输入昵称或手机号查询\"\r\n                      v-model=\"keyWord\">\r\n            </el-input>\r\n            <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"memberSearch\">查询</el-button>\r\n            <el-button type=\"primary\" icon=\"el-icon-delete\" round style=\"float: right\" @click=\"memberDelete\">删除\r\n            </el-button>\r\n            <el-button type=\"primary\" icon=\"el-icon-edit\" round style=\"float: right\" @click=\"memberEdit\">编辑</el-button>\r\n            <el-button type=\"primary\" icon=\"el-icon-success\" round style=\"float: right\" @click=\"memberAdd\">新增\r\n            </el-button>\r\n            <el-button type=\"primary\" icon=\"el-icon-download\" round style=\"float: right\" @click=\"exportMember\">导出\r\n            </el-button>\r\n        </div>\r\n\r\n        <el-table :data=\"memberListData\"\r\n                  ref=\"multipleTable\"\r\n                  :row-class-name=\"tableRowClassName\"\r\n                  stripe\r\n                  max-height=\"650\"\r\n                  @row-click=\"rowClick\"\r\n                  @selection-change=\"selectionChange\"\r\n        >\r\n            <el-table-column\r\n                    type=\"selection\"\r\n                    width=\"55\">\r\n            </el-table-column>\r\n\r\n            <el-table-column prop=\"registerPhone\" :formatter=\"phoneFormat\" label=\"手机号\" align=\"center\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"memberUuid\" label=\"会员uuid\" align=\"center\" width=\"200px\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"memberNickname\" label=\"会员昵称\" align=\"center\" show-overflow-tooltip>\r\n            </el-table-column>\r\n            <el-table-column prop=\"gender\" :formatter=\"genderFormat\" label=\"性别\" align=\"center\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"memberImgUrl\" label=\"会员头像\" align=\"center\">\r\n                <template slot-scope=\"scope\">\r\n                    <img :src=\"scope.row.memberImgUrl\" width=\"50\" height=\"50\"/>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"personSignature\" label=\"个人签名\" align=\"center\" show-overflow-tooltip>\r\n            </el-table-column>\r\n            <el-table-column prop=\"birthday\" label=\"出生年月\" align=\"center\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"memberStatus\" :formatter=\"memberStatusFormat\" label=\"账号状态\" align=\"center\">\r\n            </el-table-column>\r\n        </el-table>\r\n        <div class=\"block\" style=\"float: right;padding: 30px\">\r\n            <el-pagination\r\n                    @size-change=\"handleSizeChange\"\r\n                    @current-change=\"handleCurrentChange\"\r\n                    :page-sizes=\"[10, 20, 30, 40]\"\r\n                    :page-size=\"pageSize\"\r\n                    layout=\"total, sizes, prev, pager, next, jumper\"\r\n                    :total=\"total\">\r\n            </el-pagination>\r\n        </div>\r\n\r\n        <!--新增dialog-->\r\n        <el-dialog :title=\"dialogTitle\" :visible.sync=\"memberDialog\" width=\"35%\">\r\n            <el-form :model=\"member\" style=\"text-align: center\">\r\n                <el-form-item label=\"手机号\" label-width=\"100px\" required>\r\n                    <el-input v-model=\"member.registerPhone\" style=\"width: 229px\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"会员昵称\" label-width=\"100px\">\r\n                    <el-input v-model=\"member.memberNickname\" style=\"width: 229px\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"性别\" label-width=\"100px\">\r\n                    <el-select v-model=\"member.gender\" placeholder=\"性别\">\r\n                        <el-option label=\"男\" value=\"0\"></el-option>\r\n                        <el-option label=\"女\" value=\"1\"></el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"个人签名\" label-width=\"100px\">\r\n                    <el-input v-model=\"member.personSignature\" style=\"width: 229px\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"出生年月\" label-width=\"100px\">\r\n                    <el-date-picker type=\"date\" placeholder=\"选择日期\" v-model=\"member.birthday\"\r\n                                    :editable=\"false\"></el-date-picker>\r\n                </el-form-item>\r\n                <el-form-item label=\"会员头像\" label-width=\"100px\">\r\n                    <el-upload\r\n                            class=\"avatar-uploader\"\r\n                            action=\"/ss/upload/uploadFile\"\r\n                            :show-file-list=\"false\"\r\n                            :on-success=\"handleAvatarSuccess\"\r\n                            :before-upload=\"beforeAvatarUpload\">\r\n                        <img v-if=\"temporaryImg\" :src=\"uploadImg\" class=\"avatar\">\r\n                        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n                    </el-upload>\r\n                </el-form-item>\r\n            </el-form>\r\n            <div slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"memberDialog = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"memberSubmit\">确 定</el-button>\r\n            </div>\r\n        </el-dialog>\r\n\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"MemberList\",\r\n        data() {\r\n            return {\r\n                pageNo: 1,\r\n                pageSize: 10,\r\n                total: 0,\r\n                memberListData: [],\r\n                keyWord: null,\r\n                memberDialog: false,\r\n                uploadImg: \"\",\r\n                temporaryImg: \"\",\r\n                indexList: [],\r\n                dialogTitle: \"\",\r\n                member: {\r\n                    registerPhone: null,\r\n                    memberNickname: null,\r\n                    gender: null,\r\n                    memberImgUrl: null,\r\n                    personSignature: null,\r\n                    birthday: null\r\n                }\r\n            }\r\n        },\r\n        mounted() {\r\n            this.http(this.pageNo, this.pageSize, this.keyWord);\r\n        },\r\n        methods: {\r\n            http(pageNo, pageSize, keyWord) {\r\n                this.$http.post(\"/member/findByPage\", {}, {\r\n                    params: {\r\n                        pageNo: pageNo,\r\n                        pageSize: pageSize,\r\n                        keyWord: keyWord\r\n                    }\r\n                })\r\n                    .then(res => {\r\n                        const {list, total} = res.data;\r\n                        this.memberListData = list;\r\n                        this.total = total;\r\n                    })\r\n            },\r\n            //格式化\r\n            genderFormat(row) {\r\n                return row.gender === 0 ? '男' : '女';\r\n            },\r\n            memberStatusFormat(row) {\r\n                return row.memberStatus === 0 ? '正常' : '禁用';\r\n            },\r\n            phoneFormat(row) {\r\n                const reg = /^(\\d{3})\\d{4}(\\d{4})$/;\r\n                return String(row.registerPhone).replace(reg, \"$1****$2\");\r\n            },\r\n            //点击选中\r\n            tableRowClassName({row, rowIndex}) {\r\n                //把每一行的索引放进row\r\n                row.index = rowIndex;\r\n            },\r\n            //选中行\r\n            rowClick(row) {\r\n                const index = row.index;\r\n                this.$refs.multipleTable.toggleRowSelection(this.memberListData[index]);\r\n\r\n            },\r\n            //选中改变\r\n            selectionChange(selection) {\r\n                this.indexList = [];\r\n                selection.forEach(k => {\r\n                    this.indexList.push(k.id)\r\n                })\r\n                if (selection.length > 0) {\r\n                    this.member = selection[selection.length - 1]\r\n                    this.member.gender === 0 ? this.member.gender = \"男\" : this.member.gender = \"女\";\r\n                    this.temporaryImg = this.member.memberImgUrl;\r\n                } else {\r\n                    this.emptyMember();\r\n                }\r\n            },\r\n            //分页条\r\n            handleSizeChange(size) {\r\n                this.http(this.pageNo, size, this.keyWord);\r\n            },\r\n            //页码改变\r\n            handleCurrentChange(currentPage) {\r\n                this.http(currentPage, this.pageSize, this.keyWord);\r\n            },\r\n            //查询按钮\r\n            memberSearch() {\r\n                if (this.keyWord) {\r\n                    this.http(this.pageNo, this.pageSize, this.keyWord);\r\n                } else {\r\n                    this.message(\"请输入查询条件!\", \"warning\");\r\n                }\r\n            },\r\n            //导出按钮\r\n            exportMember() {\r\n                window.location = '/ss/excel/getMemberList'\r\n            },\r\n            //打开新增\r\n            memberAdd() {\r\n                this.emptyMember();\r\n                this.dialogTitle = \"新增会员\";\r\n                this.memberDialog = true;\r\n                this.$refs.multipleTable.clearSelection();\r\n            },\r\n            //表单确认\r\n            memberSubmit() {\r\n                if (this.dialogTitle === \"新增会员\") {\r\n                    this.memberAddSubmit();\r\n                } else {\r\n                    this.memberEditSubmit();\r\n                }\r\n\r\n            },\r\n            //新增提交\r\n            memberAddSubmit() {\r\n                this.member.memberImgUrl = this.temporaryImg;\r\n                this.$http.post(\"/member/add\", this.member\r\n                )\r\n                    .then(res => {\r\n                        this.memberDialog = false;\r\n                        this.message(res.message, \"success\")\r\n                        if (res.code === 200) {\r\n                            this.http(this.pageNo, this.pageSize, this.keyWord);\r\n                        }\r\n\r\n                    })\r\n            },\r\n            //打开编辑\r\n            memberEdit() {\r\n                if (this.member.registerPhone) {\r\n                    this.uploadImg = this.member.memberImgUrl;\r\n                    this.dialogTitle = \"编辑会员\";\r\n                    this.memberDialog = true\r\n                } else {\r\n                    this.message(\"请选中需要编辑的数据!\", \"warning\");\r\n                }\r\n\r\n            },\r\n            //编辑提交\r\n            memberEditSubmit() {\r\n                if (this.temporaryImg) {\r\n                    this.member.memberImgUrl = this.temporaryImg;\r\n                }\r\n                this.$http.put(\"/member/edit\", this.member\r\n                )\r\n                    .then(res => {\r\n                        this.memberDialog = false;\r\n                        this.message(res.message, \"success\")\r\n                        if (res.code === 200) {\r\n                            this.http(this.pageNo, this.pageSize, this.keyWord);\r\n                        }\r\n\r\n                    })\r\n            },\r\n            //删除\r\n            memberDelete() {\r\n                if (this.indexList.length > 0) {\r\n                    this.$confirm(\"您确定要删除选中的数据吗?\",\"提示\",{\r\n                        type:\"warning\"\r\n                    })\r\n                        .then(() => {\r\n                            this.$http.post(\"/member/delete\", this.indexList\r\n                            )\r\n                                .then(res => {\r\n                                    this.memberDialog = false;\r\n                                    this.message(res.message, \"success\")\r\n                                    if (res.code === 200) {\r\n                                        this.http(this.pageNo, this.pageSize, this.keyWord);\r\n                                    }\r\n\r\n                                })\r\n                        })\r\n                        .catch(() => {\r\n                        });\r\n\r\n                } else {\r\n                    this.message(\"请选中需要删除的数据!\", \"warning\");\r\n                }\r\n            },\r\n            //上传图片\r\n            handleAvatarSuccess(res, file) {\r\n                this.uploadImg = URL.createObjectURL(file.raw);\r\n                this.temporaryImg = res;\r\n            },\r\n            //限制上传文件格式\r\n            beforeAvatarUpload(file) {\r\n                const isJPG = file.type === 'image/jpeg';\r\n                const isPNG = file.type === 'image/png';\r\n                const isLt2M = file.size / 1024 / 1024 < 6;\r\n                return (isJPG || isPNG) && isLt2M;\r\n            },\r\n            //清空会员信息\r\n            emptyMember() {\r\n                this.member = {\r\n                    registerPhone: null,\r\n                    memberNickname: null,\r\n                    gender: null,\r\n                    memberImgUrl: null,\r\n                    personSignature: null,\r\n                    birthday: null\r\n                }\r\n                this.temporaryImg = this.member.memberImgUrl;\r\n            },\r\n            //信息提示\r\n            message(message, type) {\r\n                this.$message({\r\n                    message: message,\r\n                    center: true,\r\n                    duration: 1000,\r\n                    type: type\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n</script>\r\n\r\n<style scoped>\r\n    .avatar-uploader .el-upload {\r\n        border: 1px dashed #d9d9d9;\r\n        border-radius: 6px;\r\n        cursor: pointer;\r\n        position: relative;\r\n        overflow: hidden;\r\n    }\r\n\r\n    .avatar-uploader .el-upload:hover {\r\n        border-color: #409EFF;\r\n    }\r\n\r\n    .avatar-uploader-icon {\r\n        font-size: 28px;\r\n        color: #8c939d;\r\n        width: 178px;\r\n        height: 178px;\r\n        line-height: 178px;\r\n        text-align: center;\r\n    }\r\n\r\n    .avatar {\r\n        width: 100px;\r\n        height: 100px;\r\n        display: block;\r\n    }\r\n</style>"],"sourceRoot":"src/views/member"}]}